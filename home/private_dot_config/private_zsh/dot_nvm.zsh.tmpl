# NVM lazy loading
export NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")"

_init_nvm() {
    if [ -s "$NVM_DIR/nvm.sh" ]; then
        \. "$NVM_DIR/nvm.sh"
        unset -f nvm node npm npx _init_nvm
    else
        # Remove wrappers to prevent infinite recursion
        unset -f nvm node npm npx _init_nvm
    fi
}
nvm() { _init_nvm; nvm "$@"; }
node() { _init_nvm; node "$@"; }
npm() { _init_nvm; npm "$@"; }
npx() { _init_nvm; npx "$@"; }
